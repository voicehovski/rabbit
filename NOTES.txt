		Для метода
		
	@HOW_TO_USE: 
	
	@ACTIONS:
	* 
	
	@RETURN: 
	
	@PROBLEMS:
	* 

	@FRATURES:
	
	@PURPOSE:
	
		Для класса
	
	@ANNOTATION: 
	
	@HOW_TO_USE:
	* 
	
	@PROBLEMS:
	* 

	
		Формирование запроса-get с параметром массивом

	Прочесть потом можно приблизительно так:
		//См. https://api.joomla.org/cms-3/classes/JInput.html#method_get
		$jinput = JFactory::getApplication()->input;
		$table_filename = $jinput->get('table_filename', '', 'string');
		$images = $jinput->get('images', null, null);
		
		
		Использование вспомогательных классов

	Размещаем файл с кодом класса в директории helpers. Без закрывающего тега ?>
		
	Чтобы создать экземпляр, например в модели или виде, выполняем следующее (подставляем соответствующие имя класса и путь к файлу):
	if ( !class_exists ( 'csvHelper' ) ) require ( JPATH_COMPONENT_ADMINISTRATOR . DIRECTORY_SEPARATOR . 'helpers' . DIRECTORY_SEPARATOR . 'csvh.php' );
	$csv_helper = csvHelper::getInstance (  );

	Дальше используем как обычный объект:
	echo $csv_helper -> hallo (  );

	
		Отладка
		
	ECHO "DEBUG: " . __FUNCTION__ . " $some_variable<br/>";
	
	Другие "волшебные константы": __LINE__, __FILE__, __DIR__ ... и другие
	
	echo "DEBUG: main";
	print_r ( $mainProducts );
	
	
		Сравнение мультибайтных строк

	Проверка на РВ. Функции для МБ используют extended regexp, то есть не нужно, в отличие от preg заключать шаблон в одинаковые симовлы
	Функции preg_match по смыслу соответствует mb_ereg, а не mb_ereg_match, как может показаться из названия
	
	
		Загрузка классов
		
	При сохранении в сессию объекта происходит его сериализация. При последующем извлечении (в новом скрипте) класс извлекаемого объекта должен быть загружен (require, include... ) до десериализации. Но если происходит старт сессии (session_start) то извлечение происходит автоматически, а старт сессии в фреймворке может произойти ранее начала работы нашего компонента.
	В таких случаях можно остановить сессию (session_write_close(), не черевато ли это чем-нибудь) выполнить  загрузку классов и снова запустить сессию
	Есть еще функция __autoload() и сопутствующие, но когда она срабатывает, не проверял
	
	
		Добавляем метаданные скрипты и стили на страницу (размещать, например, в виде)
		
	$doc = &JFactory::getDocument();
	/* Создает пустой метатег generator. Например, на тот случай, если вы хотите скрыть, что сайт сделан на Joomla. */
	$doc->setGenerator ( 'MyNiceGenerator' ); 
	/* Задает метатег description */
	$doc->setDescription ( 'Custom desc' ); 
	/* Задает тег title. Для админпанели работает как-то неуверенно */
	$doc->setTitle ( 'Custom title' ); 
	/* Создает пользовательский метатег */
	//http-equiv="content-type" content="text/html; charset=utf-8"
	$name = "content-type";
	$content = "text/html; charset=utf-8";
	$doc->setMetaData($name,$content); 
	/* привязывает файл таблицы стилей */
	// $doc->addStyleSheet('/path/to/file') 
	/* привязывает файл javascript или скрипта на каком-либо другом языке */
	// $doc->addScript('/path/to/file') 
	/* добавляет пользовательский тег. Можно использовать для вставки любого тега в секцию head. */
	// $doc->addCustomTag(); 
	/* Добавляет кусок кода javascript. Разместит код javascript и обрамит тегом <script>. Joomla размещает их после внедрения скриптов addScript(). */
	// $doc->addScriptDeclaration() 
	/* Добавляет кусок пользовательского стиля css. Внедряет css-стили и обрамляет их тегом <style>. Joomla разместит их после стилей addStyleSheet(). */
	// $doc->addStyleDeclaration()
	
	Как добавить мета вида <meta charset="utf-8"> ?
	
	
		Поля таблиц joomla и virtuemart
		
	Основная таблица продукции #__virtuemart_products
	product_in_stock	количество товара в наявности
	product_ordered		забронировано/заказано
	product_available_date	доступен с...
	product_availability	доступность (3-5 дней, 7 дней...)
	product_sales		?
	
	Языковые таблицы продукции вида #__virtuemart_products_uk_ua	
	virtuemart_product_id	int(1)
	product_s_desc	varchar(2000)
	product_desc	varchar(18400)
	product_name	varchar(180)
	metadesc	varchar(400) Метаданные: desc, keywords и title. В админпанели расположены во вкладке "Описание". Метаданные из той же вкладки robot и author не локализуются и в базе расположены в таблице #__virtuemart_products
	metakey	varchar(400)
	customtitle	varchar(255)
	slug	varchar(192)
	
	
		Базы данных. Джоины
		
	inner join	- это склейка таблиц строго по условию a.id = b.id
	outer joins - склейки по условию, но мягко, а именно:
	left join - в результат попадут строки из a которым ничего не соответствует в b
	right join - в результат попадут строки из b которым ничего не соответствует в a
	full join - в результат попадут и те и другие
	
	
		Дата и время
		
	// There is $query -> currentTimestamp (  ) method, but it needs query object
	// $date = new JDate(); $date = JDate::getInstance(); $date = JFactory::getDate();
	// Функция php date ( 'Y-m-d H:i:s' ) формирует строку с датой и временем по шаблону, но, почемуто при попытке вставить такую строку в базу данных изменений не происходит, так что используем JFactory::getDate (  ) -> toSql (  )
	
	
		Базы данных. Индексы
		
	http://tokarchuk.ru/2012/08/indexes-classification/ и ссылки в конце статьи
	
	
		Функции работы с базами данных в жумле
		
	\libraries\joomla\database\driver.php
	

		Customs
	
	При попытке создать одноименное пользовательское поле через панель управления имя будет автоматически измененно, при чем, похоже, тупо жумлой - база данных не ведет контроля за уникальностью. Можно непосредственно в базе создать одноименное поле
	В текстовые поля кастомов (как имена, так и значения) жумла пихает не строки, а идентификаторы языковых файлов. Это позволяет локализовать кастомы. Это же позволяет давать им одинаковые имена. Константы можно размещать в стандартном локализационном файле или в оверрайде
	Можно также пихать туда локализованное имя - если в языковых файлах нет соответствующей константы и разрешено отображение имен констант, то будет выведено именно имя, но во всех языках одного
	Такой способ локализации кастомов затрудняет поиск и фильтрацию по ним - нужны промежуточные таблицы
	
	ЗНАЧЕНИЯ свойств не являются уникальными, то есть могут повторяться для одного продукта. Ни база данных, ни Жумла не следит за уникальностью
	
	Тип поля field_type обязателен для заполнения при создании вобход админ панели. Если не заполнить, жумла в админпанели выведет сообщение о невалидном поле
	
	
	
		Virtuemart. Места
	\administrator\components\com_virtuemart\helpers\vmtext.php
	\components\com_virtuemart\sublayouts\customfield.php
	\components\com_virtuemart\sublayouts
	
	
		Joomla. Обработка ошибок баз данных
	https://joomla.stackexchange.com/questions/495/how-to-do-sql-exception-error-handling-compatible-with-2-5-and-3-x
	
	
		Изображения в virtuemart
	
	При установке изображения через админпанель путем загрузки, оно автоматически публикуется, а в качестве уникального имени используется имя файла. Путь по умолчанию для изображений продуктов images/virtuemart/product/, миниатюры images/virtuemart/product/resized/имя-файла-без-расширения_0x90.jpg (это значение по умолчанию, оно не вносится в ТБД, а формируется Жумлой, миниатюра формируется автоматически, размер миниатюры задаётся в настройках). Изменения вносятся в таблицы medias, product_medias, а также изменяются даты обновления соответствующего продукта в таблицах products и product_customfields. Обязательные поля: `file_title`, `file_mimetype`, `file_type`, `file_url` - имя файла, 'image/jpeg', 'product' (для продуктов), путь к файлу, соответственно
	При добавлении через админпанель одноименного изображения, в качестве тайтла используется исходное имя файла с суффиксом _product, а сам файл сохраняется с измененным именем - дописывается числовой суффикс. Непосредственно в базе тайтлы нескольких изображений можно сделать одинаковыми, и вроде все работает. На что это влияет - не понятно
	
	Созданные скриптом изображения вроде совпадают с админпанельными, можно добавить ИД пользователя и дату модификации
	
	Непосредственно в базе можно создать изображения с одинаковыми тайтлами и url. Тайтл и url, судя по значениям, задаваемым для них Жумлой, не связаны, так что можно их устанавливать произвольно
	
	
		Создание товара в virtuemart
		
	При создании товара через админпанель без изображений и пользовательских полей будут затронуты таблицы: _virtuemart_product_prices, _virtuemart_product_categories, _virtuemart_products_uk_ua, _virtuemart_products
	При добавлении существующего custom field добавляется запись в yydur_virtuemart_product_customfields, а в таблицах _virtuemart_product_prices и _virtuemart_products обновляется время изменения
	
	
		Обновление компонента с новой версией sql-скриптов порисходит при обычной процедуре установки поверх существующего компонента

	Изменения в ТБД
	В таблице _extensions (описания компонентов) меняется колонка params, параметр version - это как раз ИД версии. Там еще какие-то мелкие изменения, но, возможно они и не касаются обновленного компонента

	Почему-то поменялась таблица _menu - запись пункта компонента, который обновился, пересоздалась с ИД+1

	Добавлены таблицы, указанные в скриптах

	В таблице _schemas обновлен ИД версии - видимо по этому полю Жумла и определяет, устанавливать или обновлять или эта версия старее чем установленная

	!!! При импорте в таблицу _session попадают все данные, котоыре я сохраняю в сессии - возможно это не хорошо, а то их очень много - целая таблица
	
	При установке начисто выполняется только скрипт install.mysql.utf8, независимо от версии, указанной в xml-описателе и верисй скиптов-обновлений. При повторной установке той же версии вызов скрипта обновления не происходит ( видимо из-за равенства версии компонента и записи в _schemas )
	
	
		Обновление/добавление типов таблиц
		
	Создаём новый / модифицируем фабричный метод create***Metadata (класс  CsvMetadata, файл csvh.php), где указываем табличные и внутренние имена полей, их типы и коды ошбок, а также функцию вариантов товара
	Соответствующая ветвь и константа должна быть при выборе content_type в виде check. А также соответствующая верстка в xml-описателе rabbit. И языковые константы, конечно.
	Если в таблицу добавлены новые КФ, их нужно создать в админпанели вручную
	Для ЛКФ в тестовых целях включена автоматическая генерация новых ЛКФ
	По умолчанию установлен импорт продукции. Другие типы нужно выбирать из списка